# RLAIF Trading Pipeline - Environment Configuration
# Copy this file to .env and fill in your actual values

# =============================================================================
# API Keys
# =============================================================================

# Anthropic Claude API
ANTHROPIC_API_KEY=sk-ant-xxx

# Alpaca Trading API (Free tier available)
ALPACA_API_KEY=PKxxx
ALPACA_SECRET_KEY=xxx
ALPACA_BASE_URL=https://paper-api.alpaca.markets  # Paper trading
# ALPACA_BASE_URL=https://api.alpaca.markets  # Live trading (use with caution!)

# Optional: Additional data sources
POLYGON_API_KEY=
FINNHUB_API_KEY=
SEC_API_KEY=

# OpenAI (for embeddings if not using local models)
OPENAI_API_KEY=sk-xxx

# =============================================================================
# Feature Store
# =============================================================================
FEAST_REPO_PATH=./feast_repo
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# =============================================================================
# Model Configuration
# =============================================================================

# Foundation Model Selection
FOUNDATION_MODEL=timesfm  # Options: timesfm, ttm
FOUNDATION_MODEL_PATH=./models/checkpoints/

# LLM Configuration
LLM_MODEL=claude-3-5-sonnet-20241022  # or claude-3-opus-20240229
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=4096

# =============================================================================
# Training Configuration
# =============================================================================

# Device
DEVICE=cuda  # Options: cuda, mps, cpu
NUM_WORKERS=4

# RL Training
RL_ALGORITHM=td3  # Options: td3, sac, ppo
N_ENVS=1
BUFFER_SIZE=200000
BATCH_SIZE=256
LEARNING_RATE=3e-4
GAMMA=0.99

# Walk-Forward Configuration
TRAIN_WINDOW_YEARS=2
TEST_WINDOW_MONTHS=6
MIN_TRAIN_SAMPLES=10000

# =============================================================================
# Backtesting Configuration
# =============================================================================

# Transaction Costs
COMMISSION_BPS=0.5  # Basis points (0.005%)
SLIPPAGE_BPS=2.0    # Basis points (0.02%)
FUNDING_RATE_BPS=1.0  # Daily funding for shorts

# Risk Management
INITIAL_CAPITAL=100000
MAX_POSITION_SIZE=0.3  # 30% per position
MAX_DRAWDOWN_PCT=25.0  # Circuit breaker
MAX_LEVERAGE=1.0

# =============================================================================
# RLAIF Configuration
# =============================================================================

# Feedback Loop
RLAIF_ITERATIONS=5
PREFERENCE_PAIRS_PER_ITERATION=1000
REWARD_MODEL_LR=1e-5
PPO_ITERATIONS=10

# =============================================================================
# Deployment Configuration
# =============================================================================

# API Server
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_RELOAD=false

# RunPod Configuration
RUNPOD_API_KEY=xxx
RUNPOD_GPU_TYPE=T4  # Options: T4, A100, H100
RUNPOD_MIN_WORKERS=2
RUNPOD_MAX_WORKERS=5

# =============================================================================
# Monitoring & Logging
# =============================================================================

# Logging
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_DIR=./logs
LOG_FORMAT=json  # json, text

# MLflow
MLFLOW_TRACKING_URI=http://localhost:5000
MLFLOW_EXPERIMENT_NAME=rlaif-trading

# Weights & Biases
WANDB_PROJECT=rlaif-trading
WANDB_ENTITY=
WANDB_MODE=online  # online, offline, disabled

# Prometheus
PROMETHEUS_PORT=8001

# Grafana
GRAFANA_HOST=localhost
GRAFANA_PORT=3000

# =============================================================================
# Data Configuration
# =============================================================================

# Data Sources
DATA_DIR=./historical_data
CACHE_DIR=./data_cache

# Assets
DEFAULT_ASSETS=AAPL,MSFT,GOOGL,AMZN,NVDA,TSLA,META,JPM,V,WMT
UNIVERSE_FILE=./configs/universe.yaml

# Data Frequency
BAR_INTERVAL=1Min  # 1Min, 5Min, 15Min, 1Hour, 1Day
LOOKBACK_DAYS=365

# =============================================================================
# Feature Engineering
# =============================================================================

# Technical Indicators
INDICATOR_PERIODS=14,21,50,100,200
VOLATILITY_WINDOW=20
REGIME_QUANTILES=3

# Sentiment Analysis
SENTIMENT_MODEL=yiyanghkust/finbert-tone
NEWS_LOOKBACK_DAYS=7
MIN_NEWS_CONFIDENCE=0.6

# =============================================================================
# Security & Compliance
# =============================================================================

# Encryption
SECRET_KEY=your-secret-key-here-change-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# Rate Limiting
RATE_LIMIT_PER_MINUTE=100

# Audit
AUDIT_LOG_DIR=./logs/audit
ENABLE_EXPLAINABILITY=true

# =============================================================================
# Development
# =============================================================================

# Debug
DEBUG=false
PROFILE_CODE=false

# Testing
TEST_MODE=false
MOCK_EXTERNAL_APIS=false

# =============================================================================
# Production
# =============================================================================

# Environment
ENVIRONMENT=development  # development, staging, production

# Alerts
ALERT_EMAIL=
SLACK_WEBHOOK_URL=
PAGERDUTY_API_KEY=

# Backup
BACKUP_ENABLED=true
BACKUP_INTERVAL_HOURS=24
BACKUP_RETENTION_DAYS=30
